/* empty css                             */import{d as j,b as F,r as O,c as T,k as i,$ as q,A as G,z as H,o as r,n as m,a as s,w as n,F as V,v as M,h as a,az as h,f as p,m as b,i as g,q as _,l as f,j as d,aA as J,aB as K}from"./index-b2a054f2.js";import{_ as z}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-cdb7bdca.js";import{d as Q,V as c}from"./VCardText-db7c3153.js";import{a as S}from"./VCard-abc5aa23.js";import{V as W}from"./VToolbar-6c594292.js";import{V as D}from"./VMenu-0c5e6553.js";import{V as E,a as C}from"./VBtn-0977a48f.js";import{V as X}from"./VAlert-8fc0b4ef.js";import{V as $}from"./VTooltip-b4f86fd5.js";import{V as Y}from"./forwardRefs-82423578.js";import"./VDivider-00712c8a.js";const Z=d("br",null,null,-1),x={class:"listitem-actions"},ee={key:0,class:"listitem-action",style:{"margin-right":"15px"}},te={key:1,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:3,class:"listitem-action",style:{"margin-right":"15px"}},ae={class:"listitem-action"},se=d("br",null,null,-1),be=j({__name:"Providers",setup(re){const P=F(),y=O([]),U=T(()=>Object.values(i.providerManifests).filter(t=>!t.hidden&&(t.multi_instance||!y.value.find(l=>l.domain==t.domain))).sort((t,l)=>(t.name||i.providerManifests[t.domain].name).toUpperCase()>(l.name||i.providerManifests[l.domain].name).toUpperCase()?1:-1)),I=i.subscribe(q.PROVIDERS_UPDATED,()=>{B()});G(I);const B=async function(){y.value=await i.getProviderConfigs()},A=function(t){i.removeProviderConfig(t),y.value=y.value.filter(l=>l.instance_id!=t)},w=function(t){P.push(`/settings/editprovider/${t}`)},N=function(t){P.push(`/settings/addprovider/${t.domain}`)},R=function(t){t.enabled=!t.enabled,i.saveProviderConfig(t.domain,{enabled:t.enabled},t.instance_id)},L=function(t){i.getData("config/providers/reload",{instance_id:t}).catch(l=>alert(l))};return H(()=>i.providers,t=>{t&&B()},{immediate:!0}),(t,l)=>(r(),m("section",null,[s(Q,{style:{"margin-right":"15px"}},{default:n(()=>[(r(!0),m(V,null,M(a(h),u=>(r(),p(S,{key:u,style:{"margin-bottom":"15px"}},{default:n(()=>[s(W,{title:t.$t(`settings.${u}providers`),density:"compact"},{append:n(()=>[a(U).filter(e=>e.type==u).length?(r(),p(D,{key:0},{activator:n(({props:e})=>[s(E,b({variant:"text"},e),{default:n(()=>[g(_(t.$t("settings.add_new")),1)]),_:2},1040)]),default:n(()=>[s(S,{density:"compact"},{default:n(()=>[(r(!0),m(V,null,M(a(U).filter(e=>e.type==u),e=>(r(),p(c,{key:e.domain,density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:e.name,onClick:v=>N(e)},{prepend:n(()=>[s(z,{domain:e.domain,size:26,class:"listitem-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1024)):f("",!0)]),_:2},1032,["title"]),u==a(h).MUSIC&&y.value.filter(e=>e.type==a(h).MUSIC&&e.domain in a(i).providerManifests&&!a(i).providerManifests[e.domain].hidden).length==0?(r(),p(X,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:n(()=>[d("b",null,_(t.$t("settings.no_providers")),1),Z,g(" "+_(t.$t("settings.no_providers_detail")),1)]),_:1})):f("",!0),(r(!0),m(V,null,M(y.value.filter(e=>e.type==u&&e.domain in a(i).providerManifests&&!a(i).providerManifests[e.domain].hidden).sort((e,v)=>(e.name||a(i).providerManifests[e.domain].name).toUpperCase()>(v.name||a(i).providerManifests[v.domain].name).toUpperCase()?1:-1),e=>(r(),p(c,{key:e.instance_id,title:e.name||a(i).providerManifests[e.domain].name,subtitle:a(i).providerManifests[e.domain].description,onClick:v=>w(e.instance_id)},{prepend:n(()=>[s(z,{domain:e.domain,size:"40px",class:"listitem-thumb",style:{"margin-left":"-5px"}},null,8,["domain"])]),append:n(()=>{var v;return[d("div",x,[a(i).syncTasks.value.filter(o=>o.provider_instance==e.instance_id).length>0?(r(),m("div",ee,[s($,{location:"top end",origin:"end center"},{activator:n(({props:o})=>[s(C,b(o,{color:"grey"}),{default:n(()=>[g(" mdi-sync ")]),_:2},1040)]),default:n(()=>[d("span",null,_(t.$t("settings.sync_running")),1)]),_:1})])):f("",!0),e.enabled?e.last_error?(r(),m("div",ie,[s($,{location:"top end",origin:"end center"},{activator:n(({props:o})=>[s(C,b(o,{color:"red"}),{default:n(()=>[g(" mdi-alert-circle ")]),_:2},1040)]),default:n(()=>[d("span",null,_(e.last_error),1)]),_:2},1024)])):(v=a(i).providers[e.instance_id])!=null&&v.available?f("",!0):(r(),m("div",ne,[s($,{location:"top end",origin:"end center"},{activator:n(({props:o})=>[s(C,J(K(o)),{default:n(()=>[g(" mdi-timer-sand ")]),_:2},1040)]),default:n(()=>[d("span",null,_(t.$t("settings.not_loaded")),1)]),_:1})])):(r(),m("div",te,[s($,{location:"top end",origin:"end center"},{activator:n(({props:o})=>[s(C,b(o,{color:"grey"}),{default:n(()=>[g(" mdi-cancel ")]),_:2},1040)]),default:n(()=>[d("span",null,_(t.$t("settings.provider_disabled")),1)]),_:1})])),d("div",ae,[s(D,{location:"bottom end"},{activator:n(({props:o})=>[s(E,b({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},o,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:n(()=>[s(Y,null,{default:n(()=>{var o;return[s(c,{title:t.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:k=>w(e.instance_id)},null,8,["title","onClick"]),s(c,{title:e.enabled?t.$t("settings.disable"):t.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:a(i).providerManifests[e.domain].builtin,onClick:k=>R(e)},null,8,["title","disabled","onClick"]),a(i).providerManifests[e.domain].documentation?(r(),p(c,{key:0,title:t.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:a(i).providerManifests[e.domain].documentation,target:"_blank"},null,8,["title","href"])):f("",!0),(o=a(i).providers[e.instance_id])!=null&&o.available&&u==a(h).MUSIC?(r(),p(c,{key:1,title:t.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:k=>a(i).startSync(void 0,[e.instance_id])},null,8,["title","onClick"])):f("",!0),!a(i).providerManifests[e.domain].builtin&&!a(i).providerManifests[e.domain].load_by_default?(r(),p(c,{key:2,title:t.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:k=>A(e.instance_id)},null,8,["title","onClick"])):f("",!0),s(c,{title:t.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:k=>L(e.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128)),se]),_:2},1024))),128))]),_:1})]))}});export{be as default};
