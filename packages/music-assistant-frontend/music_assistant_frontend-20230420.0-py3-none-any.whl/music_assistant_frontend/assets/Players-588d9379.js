import{d as w,b as z,r as A,k as a,$ as L,A as U,z as D,o as n,n as c,a as l,w as i,j as d,F,v as M,f as _,h as r,m as V,i as h,q as $,aA as R,aB as x,l as y}from"./index-b2a054f2.js";import{_ as I}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-cdb7bdca.js";import{d as j,V as p}from"./VCardText-db7c3153.js";import{V as P}from"./VTooltip-b4f86fd5.js";import{a as g,V as q}from"./VBtn-0977a48f.js";import{V as G}from"./VMenu-0c5e6553.js";import{V as O}from"./forwardRefs-82423578.js";import"./VDivider-00712c8a.js";const S={class:"listitem-actions"},Y={key:0,class:"listitem-action"},H={key:1,class:"listitem-action"},J={class:"listitem-action"},le=w({__name:"Players",setup(K){const B=z(),u=A([]),N=a.subscribe_multi([L.PLAYER_CONFIG_UPDATED],()=>{k()});U(N);const k=async function(){u.value=await a.getPlayerConfigs()},E=function(e){a.removePlayerConfig(e),u.value=u.value.filter(o=>o.player_id!=e)},f=function(e){e in a.players&&B.push(`/settings/editplayer/${e}`)},T=function(e){e.enabled=!e.enabled,a.savePlayerConfig(e.player_id,{enabled:e.enabled})},v=function(e){var o;return e.name||((o=a.players[e.player_id])==null?void 0:o.display_name)||e.default_name||e.player_id};return D(()=>a.players,e=>{e&&k()},{immediate:!0}),(e,o)=>(n(),c("section",null,[l(j,null,{default:i(()=>[d("div",null,[(n(!0),c(F,null,M([...u.value].sort((t,m)=>v(t).toUpperCase()>v(m).toUpperCase()?1:-1),t=>{var m;return n(),_(p,{key:t.player_id,title:v(t),subtitle:((m=r(a).providers[t.provider])==null?void 0:m.name)||t.provider,onClick:b=>f(t.player_id)},{prepend:i(()=>[l(I,{domain:t.provider,size:"40px",class:"listitem-thumb"},null,8,["domain"])]),append:i(()=>{var b;return[d("div",S,[t.enabled?(b=r(a).players[t.player_id])!=null&&b.available?y("",!0):(n(),c("div",H,[l(P,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[l(g,R(x(s)),{default:i(()=>[h(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>[d("span",null,$(e.$t("settings.player_not_available")),1)]),_:1})])):(n(),c("div",Y,[l(P,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[l(g,V(s,{color:"grey"}),{default:i(()=>[h(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[d("span",null,$(e.$t("settings.player_disabled")),1)]),_:1})])),d("div",J,[l(G,{location:"bottom end"},{activator:i(({props:s})=>[l(q,V({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},s,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[l(O,null,{default:i(()=>{var s;return[t.enabled&&t.player_id in r(a).players?(n(),_(p,{key:0,title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:C=>f(t.player_id)},null,8,["title","onClick"])):y("",!0),l(p,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cog",onClick:C=>T(t)},null,8,["title","onClick"]),r(a).providerManifests[t.provider].documentation?(n(),_(p,{key:1,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:r(a).providerManifests[t.provider].documentation,target:"_blank"},null,8,["title","href"])):y("",!0),(s=r(a).players[t.player_id])!=null&&s.available?y("",!0):(n(),_(p,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:C=>E(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{le as default};
