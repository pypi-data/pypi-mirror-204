<!doctype html>
<html lang="en">

<head>
    {% include "head_common.html.j2" %}

    {% if description -%}
    <meta name="description" content="{{ description }}">
    {% endif -%}
    <meta name="author" content="{{ commits[-1].author.name }}">
    <meta property="article:published_time" content="{{ commits[-1].iso_time }}">
    {% if commits|length > 1 -%}
    <meta property="article:modified_time" content="{{ commits[0].iso_time }}">
    {% endif -%}
</head>

<body>
    <header>
        {% include "navbar.html.j2" %}
        <h1>{{ title }}</h1>
        {%- if avatar_url and social_accounts %}
        {% include "author_aside.html.j2" %}
        {%- endif %}
        {% if description -%}
        <p>{{ description }}</p>
        {%- endif %}
        {% include "article_datetimes.html.j2" %}
    </header>
    <main>
        {{ main_content }}
        {%- if commits|length > 1 %}
        <footer>
            <details>
                <summary>Changelog</summary>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        {%- for commit in commits %}
                        <tr>
                            <td><small>{{ commit.human_time }}</small></td>
                            <td>{{ commit.message|trim }}</td>
                        </tr>
                        {%- endfor %}
                    </tbody>
                </table>
            </details>
        </footer>
        {%- endif %}
    </main>
    {% with author_name=commits[0].author.name %}
    {% include "footer.html.j2" %}
    {% endwith %}
</body>

</html>