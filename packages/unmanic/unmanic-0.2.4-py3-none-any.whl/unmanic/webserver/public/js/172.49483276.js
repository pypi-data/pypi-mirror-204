"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[172],{8706:(e,n,l)=>{l.r(n),l.d(n,{default:()=>ce});var t=l(9835);const o={class:"q-pa-none"},i={class:"row"},a={class:"col q-ma-sm"};function s(e,n,l,s,u,c){const r=(0,t.up)("PluginsInstalledTable"),d=(0,t.up)("MobileSettingsQuickNav"),p=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(p,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",i,[(0,t._)("div",a,[(0,t.Wm)(r)])]),(0,t.Wm)(d,{prevEnabled:!0,prevLabel:e.$t("navigation.workers"),prevPath:"/ui/settings-workers",nextEnabled:!0,nextLabel:e.$t("navigation.link"),nextPath:"/ui/settings-link"},null,8,["prevLabel","nextLabel"])])])),_:1})}var u=l(6970);const c={class:"row q-gutter-xs q-mt-xs justify-between"},r={class:"col-auto"},d={class:"row no-wrap q-pa-md"},p={class:"column"},g={class:"col-auto",style:{"max-width":"200px"}},m={class:"q-gutter-sm"},f=["innerHTML"],w={class:"row"},v=(0,t._)("div",{class:"col-6 text-right"},[(0,t._)("span",{class:"text-weight-medium"},"Author")],-1),_={class:"col-6 q-px-sm"},h={class:"row"},b=(0,t._)("div",{class:"col-6 text-right"},[(0,t._)("span",{class:"text-weight-medium"},"Version")],-1),k={class:"col-6 q-px-sm"},P={class:"text-grey-8 q-gutter-xs q-mr-lg"},W={key:0},x={key:1},y={class:"text-grey-8 q-gutter-xs"};function q(e,n,l,o,i,a){const s=(0,t.up)("q-btn"),q=(0,t.up)("q-uploader"),C=(0,t.up)("q-btn-dropdown"),I=(0,t.up)("q-btn-group"),Z=(0,t.up)("q-icon"),U=(0,t.up)("q-input"),$=(0,t.up)("q-card-section"),z=(0,t.up)("q-img"),Q=(0,t.up)("q-item-section"),S=(0,t.up)("q-item-label"),j=(0,t.up)("q-tooltip"),A=(0,t.up)("q-separator"),F=(0,t.up)("q-item"),H=(0,t.up)("q-list"),T=(0,t.up)("q-card"),L=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(T,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{class:(0,u.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",r,[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{onClick:o.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPluginFromRepo")},null,8,["onClick","label"]),(0,t.Wm)(C,{color:"secondary",label:e.$t("components.plugins.installPluginFromFile")},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("div",d,[(0,t._)("div",p,[(0,t.Wm)(q,{style:{"max-width":"300px"},url:o.getUploadUrl(),label:"Upload ZIP file...",color:"secondary",accept:".zip, application/zip","auto-upload":"",onRejected:o.onRejectedPluginUpload,onFailed:o.onFailedPluginUploadAndInstall,onUploaded:o.onSuccessfulPluginUploadAndInstall},null,8,["url","onRejected","onFailed","onUploaded"])])])])])),_:1},8,["label"])])),_:1})]),(0,t._)("div",g,[(0,t.Wm)(U,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=e=>o.filter=e),placeholder:e.$t("navigation.search")},{append:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1},8,["class"]),(0,t.Wm)($,{class:(0,u.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.Wm)(H,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.listedPlugins,((n,l)=>((0,t.wg)(),(0,t.j4)(F,{key:l,class:(0,u.C_)(n.status.update_available?"bg-warning":"")},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{src:n.icon},null,8,["src"])])),_:2},1024),(0,t.Wm)(Q,{top:"",class:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(n.name),1)])),_:2},1024),(0,t.Wm)(S,{caption:"",lines:"3"},{default:(0,t.w5)((()=>[(0,t._)("span",{innerHTML:n.description},null,8,f)])),_:2},1024)])),_:2},1024),(0,t.Wm)(Q,{top:"",class:"gt-xs col-2"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{lines:"1"},{default:(0,t.w5)((()=>[(0,t._)("div",w,[v,(0,t._)("div",_,[(0,t._)("span",{class:(0,u.C_)(e.$q.dark.isActive&&!n.status.update_available?"text-grey-5":"text-grey-8")},(0,u.zw)(n.author),3)])])])),_:2},1024),(0,t.Wm)(S,{lines:"1"},{default:(0,t.w5)((()=>[(0,t._)("div",h,[b,(0,t._)("div",k,[(0,t._)("span",{class:(0,u.C_)(e.$q.dark.isActive&&!n.status.update_available?"text-grey-5":"text-grey-8")},(0,u.zw)(n.version),3)])])])),_:2},1024)])),_:2},1024),(0,t.Wm)(Q,{center:"",side:""},{default:(0,t.w5)((()=>[(0,t._)("div",P,[n.status.update_available?((0,t.wg)(),(0,t.j4)(s,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"info",icon:"update",onClick:e=>o.updateSinglePlugin(n.id)},null,8,["onClick"])):((0,t.wg)(),(0,t.j4)(s,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"}))]),(0,t.Wm)(j,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[n.status.update_available?((0,t.wg)(),(0,t.iD)("span",W,(0,u.zw)(e.$t("components.plugins.clickToUpdatePlugin")),1)):((0,t.wg)(),(0,t.iD)("span",x,(0,u.zw)(e.$t("components.plugins.pluginUpToDate")),1))])),_:2},1024)])),_:2},1024),(0,t.Wm)(A,{inset:"",vertical:"",class:"q-mx-sm"}),(0,t.Wm)(Q,{center:"",side:""},{default:(0,t.w5)((()=>[(0,t._)("div",y,[(0,t.Wm)(C,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{clickable:"",onClick:e=>o.openPluginInfo(n.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{color:"info",name:"info"})])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[L]]),n.has_config?(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{key:0,clickable:"",onClick:e=>o.openPluginInfo(n.id,"settings")},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{color:"grey-8",name:"tune"})])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[L]]):(0,t.kq)("",!0),n.status.update_available?(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{key:1,clickable:"",onClick:e=>o.updateSinglePlugin(n.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{color:"warning",name:"update"})])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[L]]):(0,t.kq)("",!0),(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{clickable:"",onClick:e=>o.removeSinglePlugin(n.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{color:"negative",name:"delete"})])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[L]])])),_:2},1024)])),_:2},1024),(0,t.Wm)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>o.openPluginInfo(n.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,t.Wm)(s,{disable:!n.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>o.openPluginInfo(n.id,"settings")},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,t.Wm)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>o.removeSinglePlugin(n.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024),n.status.update_available?((0,t.wg)(),(0,t.j4)(j,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["class"])))),128))])),_:1})])])),_:1},8,["class"])])),_:1})}l(702);var C=l(499),I=l(6888),Z=l(9302),U=l(9981),$=l.n(U),z=l(1577),Q=l(9991),S=l(5776),j=l(4227);const A={components:{},setup(){const e=(0,Z.Z)(),{t:n}=(0,Q.QT)(),l=(0,C.iH)([]),o=(0,C.iH)(""),i=(0,C.iH)(!1),a=(0,C.iH)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),s=(0,C.iH)([]),u=(0,C.iH)([]),c=(0,C.iH)(0);function r(){let e="";return 0!==s.value.length&&(e=`${s.value.length} record${s.value.length>1?"s":""} selected of ${l.value.length}`),e}function d(){if(0!==s.value.length){let n=[];for(let e=0;e<s.value.length;e++){let l=s.value[e];n[n.length]=l.id}let l={id_list:n};$()({method:"post",url:(0,I.J4)("v2","plugins/disable"),data:l}).then((e=>{v({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function p(n){let l={id_list:n};$()({method:"post",url:(0,I.J4)("v2","plugins/update"),data:l}).then((e=>{v({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){p([e])}function m(n){let l={id_list:n};$()({method:"delete",url:(0,I.J4)("v2","plugins/remove"),data:l}).then((e=>{v({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function f(e){m([e])}function w(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,z.nx)(e)}function v(n){const{page:t,rowsPerPage:o,sortBy:s,descending:c}=n.pagination,r=n.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,p=(t-1)*o;let g={start:p,length:d,search_value:r,order_by:s,order_direction:c?"desc":"asc"};$()({method:"post",url:(0,I.J4)("v2","plugins/installed"),data:g}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,u.value=[];for(let n=0;n<e.data.results.length;n++){let l=e.data.results[n];u.value[n]={id:l.id,plugin_id:l.plugin_id,icon:l.icon,name:l.name,description:w(l.description),tags:l.tags,author:l.author,version:l.version,status:l.status,has_config:l.has_config}}l.value.splice(0,l.value.length,...u.value),a.value.page=t,a.value.rowsPerPage=o,a.value.sortBy=s,a.value.descending=c,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const _=(0,C.iH)(""),h=(0,C.iH)("");function b(n,l){let t="";for(let e=0;e<u.value.length;e++){let l=u.value[e];l.id===n&&(t=l.plugin_id)}""!==t?e.dialog({component:S.Z,componentProps:{pluginId:t,startTab:"settings"===l?"settings":"info"}}).onOk((e=>{})).onDismiss((()=>{})):e.notify({color:"negative",position:"top",message:"An error was encountered while attempting to open plugin info",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function k(){_.value="",h.value=""}function P(){e.dialog({component:j.Z,componentProps:{header:n("headers.pluginInstaller"),componentName:"PluginInstallerForm",width:"2000px",componentProps:{}}}).onOk((e=>{})).onDismiss((()=>{v({pagination:a.value,filter:o.value})}))}function W(){return(0,I.J4)("v2","upload/plugin/file")}function x(l){e.notify({color:"negative",position:"top",message:n("components.plugins.invalidZipFile"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function y(){e.notify({color:"negative",position:"top",message:n("components.plugins.failedToInstallPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),v({pagination:a.value,filter:void 0})}function q(){e.notify({color:"positive",position:"top",message:n("components.plugins.installedPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),v({pagination:a.value,filter:void 0})}return(0,t.bv)((()=>{v({pagination:a.value,filter:void 0})})),(0,t.YP)(o,((e,n)=>{v({pagination:a.value,filter:o.value})})),{selected:s,filter:o,loading:i,pagination:a,rows:l,listedPlugins:u,itemOffset:c,getSelectedString:r,onRequest:v,disableSelected:d,updateSinglePlugin:g,removeSinglePlugin:f,openPluginInfo:b,showPluginInfo:_,showPluginSettings:h,closePluginInfo:k,openPluginInstaller:P,getUploadUrl:W,onRejectedPluginUpload:x,onFailedPluginUploadAndInstall:y,onSuccessfulPluginUploadAndInstall:q}}};var F=l(1639),H=l(4458),T=l(3190),L=l(7236),D=l(8879),N=l(2045),B=l(7534),R=l(6611),J=l(2857),M=l(3246),V=l(490),O=l(1233),E=l(335),Y=l(3115),G=l(6858),K=l(926),X=l(2146),ee=l(9984),ne=l.n(ee);const le=(0,F.Z)(A,[["render",q]]),te=le;ne()(A,"components",{QCard:H.Z,QCardSection:T.Z,QBtnGroup:L.Z,QBtn:D.Z,QBtnDropdown:N.Z,QUploader:B.Z,QInput:R.Z,QIcon:J.Z,QList:M.Z,QItem:V.Z,QItemSection:O.Z,QImg:E.Z,QItemLabel:Y.Z,QTooltip:G.Z,QSeparator:K.Z}),ne()(A,"directives",{ClosePopup:X.Z});var oe=l(586),ie=l(3754);const ae={components:{MobileSettingsQuickNav:ie.Z,PluginsInstalledTable:te},setup(){const{t:e}=(0,Q.QT)();let n=null,l=(0,oe.A)(e);function o(){n=l.init()}function i(){l.close()}(0,t.bv)((()=>{o()})),(0,t.Ah)((()=>{i()}))}};var se=l(9885);const ue=(0,F.Z)(ae,[["render",s]]),ce=ue;ne()(ae,"components",{QPage:se.Z})}}]);