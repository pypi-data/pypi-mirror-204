"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[54],{6054:(t,e,n)=>{n.r(e),n.d(e,{default:()=>it});var a=n(9835),o=n(6970),s=n(1561),l=n.n(s);const i={class:"q-pa-none"},c={class:"row"},r={class:"col q-ma-sm"},u={class:"row"},m={class:"col-sm-6 col-xs-12"},d={class:"q-mb-none q-mt-sm"},p={class:"q-gutter-sm"},g={class:"q-pa-md",style:{"max-width":"350px"}},f={class:"col-sm-6 col-xs-12"},w={class:"q-mb-none q-mt-sm"},_={class:"q-gutter-sm"},h={class:"q-pa-md",style:{"max-width":"350px"}},W={class:"q-mb-none q-mt-sm"},y={class:"q-gutter-sm"},b={class:"q-pa-md",style:{"max-width":"350px"}},v={class:"q-pa-md",style:{"max-width":"400px"}},k={class:"q-mb-none q-mt-sm"},q={class:"q-gutter-sm"},$={class:"row"},U={class:"col"},S={class:"row items-center"},z={class:"col-sm-6 col-xs-12"},x={class:"text-h6"},L={class:"text-subtitle2"},Q={class:"col-auto"},R=["innerHTML"];function Z(t,e,n,s,Z,C){const P=(0,a.up)("q-skeleton"),T=(0,a.up)("q-img"),j=(0,a.up)("q-item-section"),E=(0,a.up)("q-item-label"),V=(0,a.up)("q-item"),H=(0,a.up)("q-separator"),D=(0,a.up)("q-icon"),I=(0,a.up)("q-list"),J=(0,a.up)("q-toggle"),O=(0,a.up)("q-btn"),A=(0,a.up)("q-card-section"),N=(0,a.up)("q-card"),B=(0,a.up)("q-page"),F=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(B,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",c,[(0,a._)("div",r,[(0,a._)("div",u,[(0,a._)("div",m,[(0,a._)("h5",d,(0,o.zw)(t.$t("components.settings.support.configuration")),1),(0,a._)("div",p,[null===Z.debugging?((0,a.wg)(),(0,a.j4)(P,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a._)("div",g,[(0,a.Wm)(I,{padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{src:l()})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.appVersion"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.appVersion),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(H,{spaced:"",inset:"item"}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fab fa-python"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.pythonVersion"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.pythonVersion),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(H,{spaced:"",inset:"item"}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"computer"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.platform"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.platform),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(H,{spaced:"",inset:"item"}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.configPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.configPath),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.logsPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.logsPath),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.userdataPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.userdataPath),1)])),_:1})])),_:1})])),_:1})])),_:1})])])]),(0,a._)("div",f,[(0,a._)("h5",w,(0,o.zw)(t.$t("components.settings.support.docs")),1),(0,a._)("div",_,[null===Z.debugging?((0,a.wg)(),(0,a.j4)(P,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a._)("div",h,[(0,a.Wm)(I,{dense:"",padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{onClick:e[0]||(e[0]=t=>C.openExternalURL("/unmanic/swagger")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"article"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.apiSpec")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1})),[[F]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{onClick:e[1]||(e[1]=t=>C.openExternalURL("https://docs.unmanic.app/docs/")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"article"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.applicationDocumentation")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1})),[[F]])])),_:1})])]),(0,a._)("h5",W,(0,o.zw)(t.$t("components.settings.support.support")),1),(0,a._)("div",y,[null===Z.debugging?((0,a.wg)(),(0,a.j4)(P,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a._)("div",b,[(0,a.Wm)(I,{dense:"",padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{onClick:e[2]||(e[2]=t=>C.openExternalURL("https://github.com/Unmanic/unmanic/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicAppSourceRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1})),[[F]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{onClick:e[3]||(e[3]=t=>C.openExternalURL("https://github.com/Unmanic/unmanic-frontend/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicFrontendSourceRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1})),[[F]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{onClick:e[4]||(e[4]=t=>C.openExternalURL("https://github.com/Unmanic/unmanic-plugins/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicOfficialPluginRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1})),[[F]])])),_:1})])])])]),(0,a.Wm)(H),(0,a._)("div",v,[(0,a._)("h5",k,(0,o.zw)(t.$t("components.settings.support.logs")),1),(0,a._)("div",q,[null===Z.debugging?((0,a.wg)(),(0,a.j4)(P,{key:0,type:"QToggle"})):((0,a.wg)(),(0,a.j4)(J,{key:1,modelValue:Z.debugging,"onUpdate:modelValue":[e[5]||(e[5]=t=>Z.debugging=t),e[6]||(e[6]=t=>C.toggleDebugging(Z.debugging))],label:t.$t("components.settings.support.enableDebugging")},null,8,["modelValue","label"]))])])])]),(0,a._)("div",$,[(0,a._)("div",U,[(0,a.Wm)(N,{flat:"",bordered:"",style:{width:"2000px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a._)("div",S,[(0,a._)("div",z,[(0,a._)("div",x,(0,o.zw)(t.$t("components.settings.support.currentSystemLogs"))+":",1),(0,a._)("div",L,(0,o.zw)(s.logsPath),1)]),(0,a._)("div",Q,[(0,a.Wm)(O,{onClick:C.downloadLogs,color:"secondary","icon-right":"file_download",label:t.$t("components.settings.support.downloadSystemLogs")},null,8,["onClick","label"])])])])),_:1}),(0,a.Wm)(H),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[0===s.currentLog.length?((0,a.wg)(),(0,a.j4)(P,{key:0,style:{width:"100%"},type:"text"})):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,o.C_)([t.$q.platform.is.mobile?"":"q-px-lg","system-log-content"])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.currentLog,((t,e)=>((0,a.wg)(),(0,a.iD)("p",{key:e,innerHTML:t},null,8,R)))),128))],2))])),_:1})])),_:1})])])])])),_:1})}n(8964),n(702),n(4641),n(3269);var C=n(586),P=n(499),T=n(9302),j=n(9991),E=n(9981),V=n.n(E),H=n(6888),D=n(3752);const I={name:"SettingsLibrary",setup(){(0,T.Z)();const{t}=(0,j.QT)(),e=(0,P.iH)([]),n=(0,P.iH)(""),o=(0,P.iH)(null),s=(0,P.iH)(null),l=(0,P.iH)(null),i=(0,P.iH)(null),c=(0,P.iH)(null);let r=null,u=null,m=(0,C.A)(t);function d(t){e.value=t.system_logs;let a=[];for(let e=0;e<t.system_logs.length;e++){let n=t.system_logs[e];n=n.replace(/\/[\/|.|\s|\w|-]+/,"<span style='color:var(--q-secondary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:DEBUG:[\w(\.|\-)]+/,"<span style='color:var(--q-primary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:WARNING:[\w(\.|\-)]+/,"<span style='color:var(--q-warning);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:ERROR:[\w(\.|\-)]+/,"<span style='color:var(--q-negative);'>$&</span>"),a[e]=n}e.value=a,n.value=t.logs_path}function p(){r=m.init(),u=m.serverId,m.addEventListener("open","start_system_logs",(function(t){r.send(JSON.stringify({command:"start_system_logs",params:{}}))})),m.addEventListener("message","handle_system_logs",(function(t){if("string"===typeof t.data){let e=JSON.parse(t.data);if(e.success)switch(e.type){case"system_logs":d(e.data);break}else console.error("WebSocket Error: Received contained errors - "+t.data)}else console.error("WebSocket Error: Received data was not JSON - "+t.data)}))}function g(){m.close()}return(0,a.bv)((()=>{p()})),(0,a.Ah)((()=>{g()})),{currentLog:e,logsPath:n,appVersion:o,pythonVersion:s,platform:l,configPath:i,userdataPath:c}},data(){return{debugging:(0,P.iH)(null)}},methods:{openExternalURL:function(t){(0,D.Z)(t)},fetchSettings:function(){V()({method:"get",url:(0,H.J4)("v2","settings/read")}).then((t=>{this.debugging=t.data.settings.debugging,this.configPath=t.data.settings.config_path,this.logsPath=t.data.settings.log_path,this.userdataPath=t.data.settings.userdata_path})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchSystemConfig:function(){H.ZP.getUnmanicVersion().then((t=>{this.appVersion=t})),V()({method:"get",url:(0,H.J4)("v2","settings/configuration")}).then((t=>{let e=t.data.configuration;if(this.pythonVersion=e.python,"undefined"!==typeof e.platform&&e.platform.length>0){let t=e.platform.join(" ");console.log(t),this.platform=t}})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSystemConfig"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},toggleDebugging(t){let e={settings:{debugging:t}};V()({method:"post",url:(0,H.J4)("v2","settings/write"),data:e}).then((t=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},downloadLogs(){V()({method:"get",url:(0,H.J4)("v2","docs/logs/zip"),responseType:"blob"}).then((t=>{const e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=e,n.setAttribute("download","UnmanicLogs.zip"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.fetchSettings(),this.fetchSystemConfig()}};var J=n(1639),O=n(9885),A=n(7133),N=n(3246),B=n(490),F=n(1233),G=n(335),M=n(3115),K=n(926),Y=n(2857),X=n(3175),tt=n(4458),et=n(3190),nt=n(8879),at=n(1136),ot=n(9984),st=n.n(ot);const lt=(0,J.Z)(I,[["render",Z]]),it=lt;st()(I,"components",{QPage:O.Z,QSkeleton:A.ZP,QList:N.Z,QItem:B.Z,QItemSection:F.Z,QImg:G.Z,QItemLabel:M.Z,QSeparator:K.Z,QIcon:Y.Z,QToggle:X.Z,QCard:tt.Z,QCardSection:et.Z,QBtn:nt.Z}),st()(I,"directives",{Ripple:at.Z})}}]);