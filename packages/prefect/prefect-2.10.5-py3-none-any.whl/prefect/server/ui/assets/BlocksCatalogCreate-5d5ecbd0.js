import{d as C,b as x,aF as D,c as F,e as t,ae as m,u as e,i as u,w as n,n as k,j as P,J as w,k as p,s as A,b4 as N,b5 as V,b6 as j,b7 as q,b8 as H,aC as y,b9 as J,W as K}from"./index-b3cd538e.js";import{u as M}from"./usePageTitle-dbe2b77c.js";const z=C({__name:"BlocksCatalogCreate",setup(R){const l=x(),a=w(),b=D("redirect"),i=F("blockTypeSlug"),d=t(()=>i.value?[i.value]:null),f=m(l.blockTypes.getBlockTypeBySlug,d),o=t(()=>f.response),_=t(()=>o.value?[o.value.id]:null),h=m(l.blockSchemas.getBlockSchemaForBlockType,_),r=t(()=>h.response);function S(s){l.blockDocuments.createBlockDocument(s).then(({id:c})=>B(c)).catch(c=>{y("Failed to create block","error"),console.error(c)})}function g(){a.back()}function B(s){if(y("Block created successfully","success"),b.value){const c=a.resolve(J(b.value));a.push(c);return}a.push(K.block(s))}const v=t(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return M(v),(s,c)=>{const T=P("p-layout-default");return e(o)?(p(),u(T,{key:0,class:"blocks-catalog-create"},{header:n(()=>[A(e(N),{"block-type":e(o)},null,8,["block-type"])]),default:n(()=>[e(o)?(p(),u(e(V),{key:0,"block-type":e(o)},{default:n(()=>[e(r)?(p(),u(e(j),q({key:e(r).id,"block-schema":e(r)},H({submit:S,cancel:g})),null,16,["block-schema"])):k("",!0)]),_:1},8,["block-type"])):k("",!0)]),_:1})):k("",!0)}}});export{z as default};
