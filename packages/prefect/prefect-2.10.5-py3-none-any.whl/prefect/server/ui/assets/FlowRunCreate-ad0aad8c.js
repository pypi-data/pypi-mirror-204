import{aE as k,d as x,b,c as D,aF as F,e as m,aG as I,A as J,u as t,i as N,w as d,n as V,j as O,J as A,k as B,s as i,aH as P,aI as T,aJ as U,aK as j,W as y,aC as f}from"./index-b3cd538e.js";import{u as z}from"./usePageTitle-dbe2b77c.js";class E extends k{parse(a){return JSON.parse(decodeURIComponent(a??""))}format(a){return encodeURIComponent(JSON.stringify(a))}}const K=x({__name:"FlowRunCreate",setup(_){const a=b(),s=D("deploymentId"),n=A(),c=F("parameters",E,void 0),w=m(()=>!e.value||!c.value?{}:I.map("SchemaValuesResponse",{schema:e.value.parameterOpenApiSchema,values:c.value},"SchemaValues")),R=J(a.deployments.getDeployment,[s]),e=m(()=>R.response),h=async r=>{var u,o;try{const l=await a.deployments.createDeploymentFlowRun(s.value,r),p=((o=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:o.scheduledTime)??void 0,S=!p,g=U(j,{flowRun:l,flowRunRoute:y.flowRun,router:n,immediate:S,startTime:p});f(g,"success"),n.push(y.deployment(s.value))}catch(l){f("Something went wrong trying to create a flow run","error"),console.error(l)}},v=()=>{n.back()},C=m(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return z(C),(r,u)=>{const o=O("p-layout-default");return t(e)?(B(),N(o,{key:0},{header:d(()=>[i(t(P),{deployment:t(e)},null,8,["deployment"])]),default:d(()=>[i(t(T),{deployment:t(e),parameters:t(w),onSubmit:h,onCancel:v},null,8,["deployment","parameters"])]),_:1})):V("",!0)}}});export{K as default};
